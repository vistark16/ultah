<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Happy Birthday Dandi! ğŸ‰</title>
  <style>
    :root{
      --beat:.47s;              /* BPM diubah via JS */
      --space: clamp(16px, 3vw, 28px);
      --card-pad: clamp(20px, 4vw, 48px);
      --toolbar: 64px;          /* ruang aman atas (tombol kembali + margin) */
    }

    *{ margin:0; padding:0; box-sizing:border-box; }
    html, body { height: 100%; }

    body{
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height:100%;
      display:flex; justify-content:center; align-items:center;
      background:linear-gradient(135deg,#ff6b6b 0%,#ff8e53 25%,#ffd93d 50%,#6bcf7f 75%,#4ecdc4 100%);
      background-size:400% 400%;
      animation:gradientShift 10s ease infinite;
      overflow:hidden;
    }
    @keyframes gradientShift{
      0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%}
    }
    body.party-mode{ animation:gradientShift 6s ease infinite, bgHue 8s linear infinite; }
    @keyframes bgHue{ 0%{filter:hue-rotate(0deg)} 100%{filter:hue-rotate(360deg)} }

    .container{
      position:relative; width:100%;
      min-height:100dvh; /* stabil di mobile */
    }

    .screen{
      position:absolute; inset:0;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      padding: var(--space);
      padding-top: calc(var(--space) + env(safe-area-inset-top));
      padding-bottom: calc(var(--space) + env(safe-area-inset-bottom));
      padding-left: calc(var(--space) + env(safe-area-inset-left));
      padding-right: calc(var(--space) + env(safe-area-inset-right));
      opacity:0; transition:opacity 1s ease-in-out; pointer-events:none;
    }
    .screen.active{ opacity:1; pointer-events:auto; }

    /* Konfeti */
    .confetti{
      position:absolute; top:-50px; width:15px; height:15px;
      background:#f0f; animation:fall 4s linear infinite; pointer-events:none;
    }
    @keyframes fall{
      0%{ transform:translateY(-50px) rotate(0deg); opacity:1; }
      100%{ transform:translateY(110vh) rotate(720deg); opacity:.5; }
    }
    /* Balon */
    .balloon{
      position:absolute; bottom:-100px; width:40px; height:50px;
      border-radius:50% 50% 50% 50% / 60% 60% 40% 40%;
      animation:float 8s ease-in-out infinite; pointer-events:none;
    }
    @keyframes float{
      0%{ transform:translateY(0) translateX(0) rotate(0deg); opacity:1; }
      100%{ transform:translateY(-120vh) translateX(50px) rotate(20deg); opacity:0; }
    }

    /* Welcome */
    #welcome-screen{text-align:center;}
    .birthday-text{
      color:#fff; font-weight:bold; font-size: clamp(2rem, 6vw, 5rem);
      text-shadow:0 0 20px rgba(255,255,255,.9),0 0 40px rgba(255,255,255,.8),0 8px 15px rgba(0,0,0,.35);
      margin-bottom: clamp(12px, 3vw, 20px);
      animation:bounce 1.5s ease-in-out infinite, glow 2s ease-in-out infinite;
    }
    .name{
      color:#fff; font-weight:900; letter-spacing:.1em; font-size: clamp(2.6rem, 10vw, 6rem);
      text-shadow:0 0 30px rgba(255,215,0,1),0 0 60px rgba(255,215,0,.9),0 10px 20px rgba(0,0,0,.55);
      animation:pulse 2s ease-in-out infinite;
    }
    @keyframes bounce{ 0%,100%{transform:translateY(0) scale(1)} 50%{transform:translateY(-30px) scale(1.05)} }
    @keyframes pulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.1)} }
    @keyframes glow{
      0%,100%{ text-shadow:0 0 20px rgba(255,255,255,.9),0 0 40px rgba(255,255,255,.8),0 8px 15px rgba(0,0,0,.35) }
      50%    { text-shadow:0 0 30px rgba(255,255,255,1),0 0 60px rgba(255,215,0,.9),0 8px 15px rgba(0,0,0,.35) }
    }

    .start-btn{
      margin-top: clamp(28px, 5vw, 50px);
      padding: clamp(14px, 2.5vw, 25px) clamp(32px, 6.5vw, 80px);
      font-size: clamp(1rem, 2.5vw, 2rem);
      font-weight:bold; color:#fff;
      background:linear-gradient(45deg,#ff6b6b,#ff8e53);
      border:4px solid #fff; border-radius:60px; cursor:pointer;
      box-shadow:0 10px 30px rgba(0,0,0,.4),0 0 30px rgba(255,107,107,.6);
      transition:transform .3s ease; position:relative; z-index:10;
      animation:buttonPulse 2s ease-in-out infinite;
      text-transform:uppercase; letter-spacing:.2em; min-height:44px;
    }
    @keyframes buttonPulse{
      0%,100%{ box-shadow:0 10px 30px rgba(0,0,0,.4),0 0 30px rgba(255,107,107,.6) }
      50%{ box-shadow:0 15px 40px rgba(0,0,0,.5),0 0 50px rgba(255,107,107,1) }
    }

    /* Wishes */
    #wishes-screen{ text-align:center; display:flex; justify-content:center; align-items:center; }

    .wishes-card{
      background:linear-gradient(135deg, rgba(255,255,255,.95), rgba(255,255,255,.85));
      padding: var(--card-pad);
      width: clamp(280px, 92vw, 860px);
      border-radius:30px;
      box-shadow:0 30px 80px rgba(0,0,0,.4), 0 0 60px rgba(255,215,0,.3);
      border:5px solid rgba(255,215,0,.5);
      animation:cardAppear 1s ease-out;
      position:relative; z-index:2;
      display:flex; flex-direction:column; align-items:center;
      gap: clamp(8px, 2.2vw, 18px);

      /* >>> Kunci: batasi tinggi + scroll kalau terlalu panjang <<< */
      max-height: calc(100dvh - var(--toolbar) - 2*var(--space) - env(safe-area-inset-top) - env(safe-area-inset-bottom));
      overflow:auto; -webkit-overflow-scrolling: touch; overscroll-behavior: contain;
      scrollbar-width: thin;
    }
    body.party-mode .wishes-card{ animation:cardAppear 1s ease-out, beatPulse var(--beat) ease-in-out infinite; }
    @keyframes cardAppear{ 0%{transform:scale(.5) rotateY(180deg);opacity:0} 100%{transform:scale(1) rotateY(0);opacity:1} }
    @keyframes beatPulse{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.03)} }

    .wishes-title{
      background:linear-gradient(45deg,#ff6b6b,#ff8e53,#ffd93d);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
      font-size: clamp(1.6rem, 5.2vw, 3rem);
      font-weight:900; text-shadow:0 0 12px rgba(255,255,255,.6);
      animation:titleShine 2.2s ease-in-out infinite, beatNeon var(--beat) ease-in-out infinite;
      margin-bottom: 0;
    }
    @keyframes titleShine{ 0%,100%{filter:brightness(1)} 50%{filter:brightness(1.3)} }
    @keyframes beatNeon{ 0%,100%{filter:drop-shadow(0 0 0 rgba(255,255,255,0))} 50%{filter:drop-shadow(0 0 12px rgba(255,255,255,.9))} }

    .spin-name{
      color:#fff; font-weight:900; letter-spacing:.12em;
      font-size: clamp(2.2rem, 8.5vw, 4.5rem);
      text-shadow:0 0 30px rgba(255,215,0,1),0 0 60px rgba(255,215,0,.8),0 10px 20px rgba(0,0,0,.5);
      animation:spinCW .6s linear infinite, neonPulse 1.2s ease-in-out infinite;
    }
    @keyframes spinCW{ to{ transform:rotate(360deg); } }
    @keyframes neonPulse{ 0%,100%{ filter:brightness(1); } 50%{ filter:brightness(1.35); } }

    .wishes-text{
      color:#333; font-weight:500;
      font-size: clamp(1rem, 3.2vw, 1.4rem);
      line-height: clamp(1.6, 4.5vw, 2);
      text-align:center;
      animation:fadeInUp 1s ease-out backwards;
    }
    @keyframes fadeInUp{ 0%{transform:translateY(30px);opacity:0} 100%{transform:translateY(0);opacity:1} }

    .emoji{ font-size: clamp(1.8rem, 6vw, 3rem); }
    .emoji.a{ animation:spinCW .4s linear infinite; }
    .emoji.b{ animation:spinCCW .8s linear infinite; }
    @keyframes spinCCW{ to{ transform:rotate(-360deg); } }

    /* PARTY LIGHTS â€” sekarang DI BELAKANG kartu agar teks tidak ketutup */
    #partyFX{
      position:fixed; inset:0; pointer-events:none; z-index:1;
      display:none;
    }
    body.party-mode #partyFX{ display:block; }

    #partyFX .wash{
      position:absolute; inset:-10%;
      background:conic-gradient(from 0deg,
        rgba(255, 84, 84, .58),
        rgba(255, 199, 78, .58),
        rgba(90, 213, 133, .58),
        rgba(79, 206, 196, .58),
        rgba(162, 155, 254, .58),
        rgba(255, 84, 84, .58)
      );
      filter:blur(8px); mix-blend-mode:screen; opacity:.98; transform:scale(1.06);
      animation:hueSpin 9s linear infinite, washPulse var(--beat) ease-in-out infinite;
    }
    #partyFX .wash2{
      position:absolute; inset:-12%;
      background:conic-gradient(from 180deg,
        rgba(255,255,255,.25),
        rgba(255, 90, 90, .42),
        rgba(255, 220, 90, .42),
        rgba(90, 255, 180, .42),
        rgba(120, 180, 255, .42),
        rgba(255,255,255,.25)
      );
      filter:blur(12px); mix-blend-mode:screen; opacity:.95; transform:scale(1.1);
      animation:hueSpinReverse 7s linear infinite, washPulse2 calc(var(--beat) * .75) ease-in-out infinite;
    }
    @keyframes hueSpin{ to{ filter:hue-rotate(360deg) blur(8px); } }
    @keyframes hueSpinReverse{ to{ transform:scale(1.1) rotate(-360deg); } }
    @keyframes washPulse{ 0%,100%{opacity:.8} 50%{opacity:1} }
    @keyframes washPulse2{ 0%,100%{opacity:.7} 50%{opacity:1} }

    #partyFX .strobeSoft{
      position:absolute; inset:0; opacity:0;
      background:radial-gradient(60vmax 60vmax at 50% 50%, rgba(255,255,255,.35), rgba(255,255,255,0) 60%);
      mix-blend-mode:screen; animation: strobeSoft var(--beat) steps(2,end) infinite;
    }
    #partyFX .strobeHard{
      position:absolute; inset:0; opacity:0;
      background:radial-gradient(55vmax 55vmax at 50% 50%, rgba(255,255,255,1), rgba(255,255,255,0) 60%);
      mix-blend-mode:screen; animation: strobeHard calc(var(--beat)*.5) steps(2,end) infinite;
    }
    #partyFX .flashBeat{
      position:absolute; inset:0; opacity:0; background:#fff; mix-blend-mode:screen;
      animation: flashBeat calc(var(--beat)*.75) steps(2,end) infinite;
    }
    @keyframes strobeSoft{ 50%{opacity:.95} }
    @keyframes strobeHard{ 50%{opacity:1} }
    @keyframes flashBeat{ 50%{opacity:.9} }

    .back-btn{
      position:absolute;
      top: max(16px, env(safe-area-inset-top));
      left: max(16px, env(safe-area-inset-left));
      z-index:4;
      padding:10px 16px; border-radius:999px; font-weight:700; letter-spacing:.04em;
      border:2px solid rgba(255,255,255,.85); background:rgba(0,0,0,.35); color:#fff;
      backdrop-filter:blur(6px); cursor:pointer; transition:transform .2s ease, background .2s ease;
      min-height:44px;
    }

    /* Phone landscape / tinggi pendek: kompres lebih ketat */
    @media (max-height: 620px){
      :root{ --card-pad: clamp(16px, 3.2vw, 36px); --toolbar: 56px; }
      .spin-name{ font-size: clamp(1.8rem, 7.2vw, 3.6rem); }
      .wishes-title{ font-size: clamp(1.4rem, 4.6vw, 2.6rem); }
      .emoji{ font-size: clamp(1.6rem, 5.2vw, 2.4rem); }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Layar Pertama -->
    <div id="welcome-screen" class="screen active">
      <div class="birthday-text">ğŸ‚ HAPPY BIRTHDAY ğŸ‚</div>
      <div class="name">DANDI</div>
      <button class="start-btn" id="startBtn">START</button>
    </div>

    <!-- Layar Kedua -->
    <div id="wishes-screen" class="screen">
      <button id="backBtn" class="back-btn" aria-label="Kembali ke halaman awal">KEMBALI</button>

      <div class="wishes-card">
        <div class="wishes-title">Selamat Ulang Tahun, Dandi! ğŸ‰</div>
        <div class="spin-name">DANDI</div>
        <div class="emoji a">ğŸˆâœ¨ğŸ</div>

        <p class="wishes-text">Semoga di usia yang baru ini selalu diberkahi dengan kesehatan, kebahagiaan, dan kesuksesan dalam segala hal yang don lakukan</p>
        <p class="wishes-text">Semoga semua impian dan cita-cita don tercapai, thesis lancar sampai lanjut PhD uhuy</p>
        <p class="wishes-text">Tetap menjadi pribadi yang baik, penuh semangat, dan menginspirasi banyak orang di sekitar</p>

        <div class="emoji b">ğŸ¥³ğŸ’«ğŸŠ</div>
      </div>
    </div>
  </div>

  <!-- Lampu selayar (di BELAKANG kartu) -->
  <div id="partyFX" aria-hidden="true">
    <div class="wash"></div>
    <div class="wash2"></div>
    <div class="strobeSoft"></div>
    <div class="strobeHard"></div>
    <div class="flashBeat"></div>
  </div>

  <script>
    // Responsiveness-aware counts
    const pick = a => a[Math.floor(Math.random()*a.length)];
    const compact = window.matchMedia('(max-width: 420px), (max-height: 520px)').matches;
    const CONFETTI_COUNT = compact ? 50 : 100;
    const BALLOON_COUNT  = compact ? 12 : 20;

    function createConfetti(){
      const colors = ['#ff6b6b','#4ecdc4','#45b7d1','#ffd93d','#6bcf7f','#a29bfe','#ff8e53','#ff6348'];
      const shapes = ['â– ','â—','â–²','â˜…','â™¥','â—†'];
      for(let i=0;i<CONFETTI_COUNT;i++){
        const el=document.createElement('div');
        el.className='confetti';
        el.style.left=Math.random()*100+'%';
        el.style.backgroundColor=pick(colors);
        el.style.animationDelay=Math.random()*5+'s';
        el.style.animationDuration=(Math.random()*3+3)+'s';
        el.innerHTML=pick(shapes);
        el.style.color=pick(colors);
        el.style.fontSize=(Math.random()*10+10)+'px';
        el.style.fontWeight='bold';
        document.body.appendChild(el);
      }
    }
    function createBalloons(){
      const colors=['#ff6b6b','#4ecdc4','#ffd93d','#6bcf7f','#a29bfe','#ff8e53'];
      for(let i=0;i<BALLOON_COUNT;i++){
        const el=document.createElement('div');
        el.className='balloon';
        el.style.left=Math.random()*100+'%';
        el.style.backgroundColor=pick(colors);
        el.style.animationDelay=Math.random()*3+'s';
        el.style.animationDuration=(Math.random()*4+6)+'s';
        document.body.appendChild(el);
      }
    }

    function setBPM(bpm=165){
      const beat=(60/bpm).toFixed(3)+'s';
      document.documentElement.style.setProperty('--beat', beat);
    }

    // Transisi tanpa inline opacity
    function showWishes(){
      const welcome = document.getElementById('welcome-screen');
      const wishes  = document.getElementById('wishes-screen');
      welcome.style.opacity = '';
      wishes.style.opacity  = '';
      welcome.classList.remove('active');
      wishes.classList.add('active');
      document.body.classList.add('party-mode');
      createConfetti(); createBalloons();
    }
    function backToWelcome(){
      const welcome = document.getElementById('welcome-screen');
      const wishes  = document.getElementById('wishes-screen');
      welcome.style.opacity = '';
      wishes.style.opacity  = '';
      wishes.classList.remove('active');
      welcome.classList.add('active');
      document.body.classList.remove('party-mode');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.getElementById('startBtn').addEventListener('click', showWishes);
    document.getElementById('backBtn').addEventListener('click', backToWelcome);

    setBPM(165);
    createConfetti(); createBalloons();
    setInterval(()=>createConfetti(), 5000);
    setInterval(()=>createBalloons(), 4000);
  </script>
</body>
</html>
